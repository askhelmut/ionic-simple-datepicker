!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("angular"),require("moment")):"function"==typeof define&&define.amd?define(["angular","moment"],t):t(e.angular,e.moment)}(this,function(e,t){"use strict";e="default"in e?e.default:e,t="default"in t?t.default:t;var o=function(){};e.module("simple-datepicker",[]).directive("simpleDatepicker",[function(){var e="dd",o=7;return{restrict:"E",template:'<div class="simple-datepicker"><div class="simple-datepicker__month-picker"><div class="button-bar"><button class="button" ng-click="goToPreviousMonth()" ng-disabled="! hasPrevMonth()" ng-bind="prevButtonLabel"></button><button class="button" ng-click="goToNextMonth()" ng-disabled="! hasNextMonth()" ng-bind="nextButtonLabel"></button></div></div><div class="simple-datepicker__month"><h1 ng-bind="getCurrentMonth()"></h1></div><div class="simple-datepicker__calendar"><div class="simple-datepicker__calendar__date-header" ng-bind="weekday" ng-repeat="weekday in weekdays track by $index"></div><div class="simple-datepicker__calendar__date" ng-repeat="day in days track by $index" ng-class="{ \'simple-datepicker__calendar__date--not-current-month\': ! day.isInCurrentMonth, \'simple-datepicker__calendar__date--not-in-timeframe\': ! day.isInTimeframe, \'simple-datepicker__calendar__date--selected\': day.date == current, \'simple-datepicker__calendar__date--not-active\': ! day.active }" ng-bind="day.label" ng-click="setSelectedDay(day)"></div></div><div class="simple-datepicker__footer"><button class="button button-full simple-datepicker__footer__close" ng-bind="closeButtonLabel" ng-click="close()"></button></div></div>',scope:{initial:"=?",from:"=?",to:"=?",format:"=?",weekdayFormat:"=?",labels:"=?",activeDays:"=?",onSelected:"&",onClose:"&"},link:function(n){function a(a){var r=a||e;for(n.weekdays=[],i=0;i<o;i++)n.weekdays.push(t().weekday(i).format(r))}var i;n.days=[],n.weekdays=[],n.prevButtonLabel="<",n.nextButtonLabel=">",n.closeButtonLabel="X",n.setSelectedDay=function(e){e.active&&(n.current=e.date,n.onSelected({current:t(n.current).format()}))},n.goToPreviousMonth=function(){n.focus=t(n.focus).subtract(1,"month").format()},n.goToNextMonth=function(){n.focus=t(n.focus).add(1,"month").format()},n.hasPrevMonth=function(){return!n.from||t(n.focus).startOf("month").isAfter(n.from)},n.hasNextMonth=function(){return!n.to||t(n.focus).endOf("month").isBefore(n.to)},n.getCurrentMonth=function(){return t(n.focus).format("MMMM YY")},n.close=function(){n.onClose({current:t(n.current).format()})},n.$watch("labels",function(e){e&&(n.prevButtonLabel=e.prevButton||"<",n.nextButtonLabel=e.nextButton||">",n.closeButtonLabel=e.closeButton||"X")}),n.$watch("weekdayFormat",function(e){a(e)}),n.$watch("format",function(e){e||(n.format="YYYY-MM-DD")}),n.$watch("initial",function(e){!e||e&&!t(e).isValid()?n.current=t().format("YYYY-MM-DD"):n.current=t(e,n.format).format("YYYY-MM-DD"),n.focus=n.current}),n.$watch("activeDays",function(e){n.activeDays=e||null}),n.$watch("focus",function(e){var o,a,r,c,s,d,l,u;for(c=[],s=t(e).startOf("month").weekday(0),u=t(e).format("MM"),i=0;t(s).isBefore(t(e).endOf("month"));)l=(d=(s=t(e).startOf("month").weekday(i)).format("YYYY-MM-DD")).split("-"),a=!n.from||(s.isAfter(n.from)||s.isSame(n.from)),r=!n.to||(s.isBefore(n.to)||s.isSame(n.to)),(o={date:d,label:l[2],isInCurrentMonth:l[1]===u,active:(!n.activeDays||n.activeDays.indexOf(d)>-1)&&a&&r}).isInTimeframe=a&&r,c.push(o),i++;n.days=c})}}}]),e.module("ionic-simple-datepicker",["ionic","simple-datepicker"]).factory("simpleDatepickerPopover",["$rootScope","$q","$timeout","$ionicPopover",function(n,a,i,r){function c(){return e.isDefined(s)&&s.isShown()}var s;return{show:function(c,d){var l,u,f,m,p;return u=o,f=a.defer(),m=d||{},p={animation:"slide-in-up",focusFirstInput:!1,backdropClickToClose:!0,hardwareBackButtonClose:!0},e.extend(p,m),p.scope=d&&d.scope&&d.scope.$new()||n.$new(!0),(s=r.fromTemplate('<ion-popover-view class="simple-datepicker-popover"><ion-content scroll="false"><simple-datepicker from="from" to="to" initial="initial" active-days="activeDays" on-selected="_onSelected(current)" on-close="_onClose(current)" labels="labels" weekday-format="weekdayFormat"></simple-datepicker></ion-content></ion-popover-view>',p)).scope.$on("$destroy",function(){s.remove()}),s.scope.$on("popover.hidden",function(){f.resolve({current:l}),i(function(){s.remove()})}),d&&(d.initial&&t(d.initial).isValid()&&(s.scope.initial=d.initial,l=t(d.initial).format()),d.format&&e.isString(d.format)&&(s.scope.format=d.format),d.weekdayFormat&&e.isString(d.weekdayFormat)&&(s.scope.weekdayFormat=d.weekdayFormat),d.from&&t(d.from).isValid()&&(s.scope.from=d.from),d.to&&t(d.to).isValid()&&(s.scope.to=d.to),d.onSelected&&e.isFunction(d.onSelected)&&(u=d.onSelected),d.activeDays&&e.isArray(d.activeDays)&&d.activeDays.length>0&&(s.scope.activeDays=d.activeDays),d.labels&&e.isObject(d.labels)&&(s.scope.labels=d.labels)),s.scope._onSelected=function(e){u({current:e}),l=e},s.scope._onClose=function(e){l=e,s.hide()},s.show(c),f.promise},hide:function(){return!!c()&&(s.hide(),!0)},isShown:function(){return c()}}}])});
