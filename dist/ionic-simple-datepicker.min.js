/*! ionic-simple-datepicker.js v0.0.1 04-11-2015 */

!function(a,b,c,d){"use strict";var e=b.module("ionic-simple-datepicker",["ionic"]);e.factory("simpleDatepickerPopover",["$rootScope","$q","$timeout","$ionicPopover",function(a,d,e,f){var g,h,i="slide-in-up",j=function(){};return g={show:function(e,g){var k,l={animation:g&&g.animation||i,scope:g&&g.scope&&g.scope.$new()||a.$new(!0)},m=j,n=d.defer();return h=f.fromTemplate('<ion-popover-view class="simple-datepicker-popover"><ion-content scroll="false"><simple-datepicker from="from" to="to" initial="initial" active-days="activeDays" on-selected="_onSelected(current)" on-close="_onClose(current)" labels="labels"></simple-datepicker></ion-content></ion-popover-view>',l),h.scope.$on("$destroy",function(){h.remove()}),h.scope.$on("popover.hidden",function(){n.resolve({current:k})}),g&&(g.initial&&c(g.initial).isValid()&&(h.scope.initial=g.initial,k=c(g.initial).format()),g.format&&b.isString(g.format)&&(h.scope.format=g.format),g.from&&c(g.from).isValid()&&(h.scope.from=g.from),g.to&&c(g.to).isValid()&&(h.scope.to=g.to),g.onSelected&&b.isFunction(g.onSelected)&&(m=g.onSelected),g.activeDays&&b.isArray(g.activeDays)&&g.activeDays.length>0&&(h.scope.activeDays=g.activeDays),g.labels&&b.isObject(g.labels)&&(h.scope.labels=g.labels)),h.scope._onSelected=function(a){k!==a&&(m({current:a}),k=a)},h.scope._onClose=function(a){k=a,h.hide()},h.show(e),n.promise}}}]),e.directive("simpleDatepicker",[function(){var a="YYYY-MM-DD",b=7,d="<",e=">",f="X";return{restrict:"E",template:'<div class="simple-datepicker"><div class="simple-datepicker__month-picker"><div class="button-bar"><button class="button" ng-click="goToPreviousMonth()" ng-disabled="! hasPrevMonth()" ng-bind="prevButtonLabel"></button><button class="button" ng-click="goToNextMonth()" ng-disabled="! hasNextMonth()" ng-bind="nextButtonLabel"></button></div></div><div class="simple-datepicker__month"><h1 ng-bind="getCurrentMonth()"></h1></div><div class="simple-datepicker__calendar"><div class="simple-datepicker__calendar__date-header" ng-bind="weekday" ng-repeat="weekday in weekdays track by $index"></div><div class="simple-datepicker__calendar__date" ng-repeat="day in days track by $index" ng-class="{ \'simple-datepicker__calendar__date--not-current-month\': ! day.isInCurrentMonth, \'simple-datepicker__calendar__date--not-in-timeframe\': ! day.isInTimeframe, \'simple-datepicker__calendar__date--selected\': day.date == current, \'simple-datepicker__calendar__date--not-active\': ! day.active }" ng-bind="day.label" ng-click="setSelectedDay(day)"></div></div><div class="simple-datepicker__footer"><button class="button button-full simple-datepicker__footer__close" ng-bind="closeButtonLabel" ng-click="close()"></button></div></div>',scope:{initial:"=",from:"=",to:"=",format:"=",labels:"=",activeDays:"=",onSelected:"&",onClose:"&"},link:function(g){var h;for(g.days=[],g.weekdays=[],g.prevButtonLabel=d,g.nextButtonLabel=e,g.closeButtonLabel=f,h=0;b>h;h++)g.weekdays.push(c().weekday(h).format("dd"));g.setSelectedDay=function(a){a.active&&(g.current=a.date)},g.goToPreviousMonth=function(){g.focus=c(g.focus).subtract(1,"month").format()},g.goToNextMonth=function(){g.focus=c(g.focus).add(1,"month").format()},g.hasPrevMonth=function(){return g.from?c(g.focus).startOf("month").isAfter(g.from):!0},g.hasNextMonth=function(){return g.to?c(g.focus).endOf("month").isBefore(g.to):!0},g.getCurrentMonth=function(){return c(g.focus).format("MMMM YY")},g.close=function(){g.onClose({current:c(g.current).format()})},g.$watch("labels",function(a){a&&(g.prevButtonLabel=a.prevButton||d,g.nextButtonLabel=a.nextButton||e,g.closeButtonLabel=a.closeButton||f)}),g.$watch("format",function(b){b||(g.format=a)}),g.$watch("initial",function(a){!a||a&&!c(a).isValid()?g.current=c().format("YYYY-MM-DD"):g.current=c(a,g.format).format("YYYY-MM-DD"),g.focus=g.current}),g.$watch("current",function(a){g.onSelected({current:c(a).format()})}),g.$watch("activeDays",function(a){a?g.activeDays=a:g.activeDays=null}),g.$watch("focus",function(a){var b,d,e,f,i,j,k,l;for(f=[],i=c(a).startOf("month").day(0),l=c(a).format("MM"),h=0;c(i).isBefore(c(a).endOf("month"));)i=c(a).startOf("month").day(h),j=i.format("YYYY-MM-DD"),k=j.split("-"),b={date:j,label:k[2],isInCurrentMonth:k[1]===l,active:!g.activeDays||g.activeDays.indexOf(j)>-1},d=g.from?i.isAfter(g.from):!0,e=g.to?i.isBefore(g.to):!0,b.isInTimeframe=d&&e,f.push(b),h++;g.days=f})}}}])}(window,window.angular,window.moment);
//# sourceMappingURL=ionic-simple-datepicker.min.map